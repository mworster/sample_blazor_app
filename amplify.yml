version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo Installing .NET SDK 8
        # Update system
        - sudo yum update -y
        # Remove conflicting curl-minimal package (if needed)
        - sudo yum remove -y curl-minimal
        # Install wget and curl
        - sudo yum install -y wget curl
        # Add Microsoft repo
        - curl https://packages.microsoft.com/config/amazon/2023/prod.repo | sudo tee /etc/yum.repos.d/microsoft-prod.repo
        # Install .NET SDK 8
        - sudo yum install -y dotnet-sdk-8.0
    build:
      commands:
        - echo Building the .NET project
        - dotnet publish -c Release -o ./output
  artifacts:
    baseDirectory: ./output
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*

