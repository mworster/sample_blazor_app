version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo Installing .NET SDK 8
        # Update system and install necessary utilities
        - sudo yum update -y
        # Install wget and curl explicitly to avoid conflicts
        - sudo yum install -y wget curl
        # Add Microsoft's repository for Amazon Linux 2023
        - curl https://packages.microsoft.com/config/amazon/2023/prod.repo | sudo tee /etc/yum.repos.d/microsoft-prod.repo
        # Install .NET SDK 8.0
        - sudo yum install -y dotnet-sdk-8.0
    build:
      commands:
        - echo Building the .NET project
        - dotnet publish -c Release -o ./output
  artifacts:
    baseDirectory: ./output
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*

